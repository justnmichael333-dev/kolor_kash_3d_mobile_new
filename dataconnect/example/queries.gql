mutation CreateNewUser($email: String!, $username: String!) @auth(level: USER) {
  user_insert(data: {
    email: $email,
    username: $username,
		createdAt_expr: "request.time"
  })
}

query GetModel3D @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  model3DS {
    id
    name
    description
    modelDataUrl
    thumbnailUrl
    kashUnlockPrice
  }
}

mutation SubmitBattle($battleId: UUID!, $coloredModelId: UUID!) @auth(level: USER) {
  battleSubmission_insert(data: {
    battleId: $battleId,
    coloredModelId: $coloredModelId,
    userId_expr: "auth.uid",
    createdAt_expr: "request.time"
  })
}

query GetUserKashBalance @auth(level: USER) {
  user(key: {id_expr: "auth.uid"}) {
    kashBalance
  }
}